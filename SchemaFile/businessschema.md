-- Drop table if it exists
drop table if exists public.businesses cascade;

-- Recreate with auto-increment int PK
create table public.businesses (
  id bigint primary key generated by default as identity,
  created_at timestamptz not null default now(),
  nome text not null,
  descricao text null,
  foto text null,
  logo_url text null,
  website text null,
  instagram text null,
  facebook text null,
  email text null,
  endereco text not null,
  telefone text null,
  categoria text not null
);

-- Recommended indexes
create index if not exists idx_businesses_nome 
  on public.businesses using gin (to_tsvector('simple', coalesce(nome, '')));

create index if not exists idx_businesses_categoria 
  on public.businesses using gin (to_tsvector('simple', coalesce(categoria, '')));
